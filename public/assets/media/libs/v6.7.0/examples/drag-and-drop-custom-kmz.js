"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5758],{13494:function(n,r,e){var t=e(33156),o=e(29123),i=e(72442),a=e(85920),c=e(22338),u=e(72916),f=e(13990),v=e(63059),s=e(98243),d=e(19987),m=e(96802),w=e(86395),l=e(57356),k=new JSZip;function p(n){var r;k.load(n);var e=k.file(/.kml$/i)[0];return e&&(r=e.asText()),r}function b(n){var r=n,e=window.location.href;if(e=e.slice(0,e.lastIndexOf("/")+1),0===n.indexOf(e)){var t=new RegExp(n.replace(e,"")+"$","i"),o=k.file(t)[0];o&&(r=URL.createObjectURL(new Blob([o.asArrayBuffer()])))}return r}var z=function(n){function r(r){var e=r||{};e.iconUrlFunction=b,n.call(this,e)}return n&&(r.__proto__=n),r.prototype=Object.create(n&&n.prototype),r.prototype.constructor=r,r.prototype.getType=function(){return"arraybuffer"},r.prototype.readFeature=function(r,e){var t=p(r);return n.prototype.readFeature.call(this,t,e)},r.prototype.readFeatures=function(r,e){var t=p(r);return n.prototype.readFeatures.call(this,t,e)},r}(c.ZP),g=new i.Z({formatConstructors:[z,u.Z,f.Z,v.Z,c.ZP,s.Z]}),h=new t.Z({interactions:(0,a.ce)().extend([g]),layers:[new w.Z({source:new d.Z})],target:"map",view:new o.ZP({center:[0,0],zoom:2})});g.on("addfeatures",(function(n){var r=new m.Z({features:n.features});h.addLayer(new l.Z({source:r})),h.getView().fit(r.getExtent())}));var y=function(n){var r=[];if(h.forEachFeatureAtPixel(n,(function(n){r.push(n)})),r.length>0){var e,t,o=[];for(e=0,t=r.length;e<t;++e){var i=r[e].get("description")||r[e].get("name")||r[e].get("_name")||r[e].get("layer");i&&o.push(i)}document.getElementById("info").innerHTML=o.join("<br/>")||"&nbsp"}else document.getElementById("info").innerHTML="&nbsp;"};h.on("pointermove",(function(n){if(!n.dragging){var r=h.getEventPixel(n.originalEvent);y(r)}})),h.on("click",(function(n){y(n.pixel)}));var R=document.getElementById("download");document.getElementById("download-kmz").addEventListener("click",(function(){var n;n="iceland.kmz",fetch("data/kmz/iceland.kmz").then((function(n){return n.blob()})).then((function(r){navigator.msSaveBlob?navigator.msSaveBlob(r,n):(R.href=URL.createObjectURL(r),R.download=n,R.click())}))}))}},function(n){var r;r=13494,n(n.s=r)}]);
//# sourceMappingURL=drag-and-drop-custom-kmz.js.map